
# default to using syslog. /etc/rsyslog.d/45-frr.conf places the log in
# /var/log/frr/frr.log
#
# Note:
# FRR's configuration shell, vtysh, dynamically edits the live, in-memory
# configuration while FRR is running. When instructed, vtysh will persist the
# live configuration to this file, overwriting its contents. If you want to
# avoid this, you can edit this file manually before starting FRR, or instruct
# vtysh to write configuration to a different file.
log syslog informational

hostname {{ ansible_hostname }}
log syslog informational
no ipv6 forwarding
service integrated-vtysh-config
!
!
!
router ospf
router-id 1.1.1.{{ ansible_hostname | regex_search('\d+') | first }}
!
{% set router_id = 'router' + ansible_hostname | regex_search('\d+') | first %}
{% set router_nets = router_networks[router_id] %}
{% for network_ in router_nets %}
network {{ network_ }} area 0
{% endfor %}
!
{% set router_nei = router_neighbors[router_id] %}
{% for nei in router_nei %}
neighbor {{ nei }}
{% endfor %}
